---
import BaseHead from "../components/BaseHead.astro";
import { PageHeader } from "../components/PageHeader";
import { LetterHeader } from "../components/LetterHeader";
import Footer from "../components/Footer.astro";

import "../styles/tailwind.css";

export interface BlogPostTemplateProps {
  title: string;
  description: string;
  publishDate: string;
  updatedDates?: string[];
  heroImage?: {
    src: string;
    alt: string;
  };
}

const { title, description, publishDate, updatedDates, } =
  Astro.props.content ?? Astro.props as BlogPostTemplateProps;

const canonicalURL = new URL(Astro.url.pathname, Astro.site).pathname;
---

<html lang="en">

<head>
  <BaseHead title={title} description={description} />
</head>

<body>
  <div class="flex flex-col justify-start min-h-screen">
    <PageHeader />
    <article class="flex-1">
      <header class="mb-16">
        <LetterHeader url={canonicalURL} title={title} desc={description} />

      </header>
      <main class="container mx-auto flex flex-col sm:flex-row justify-center sm:gap-x-4 md:gap-x-8 gap-y-4 sm:gap-y-0">
        <aside class="order-2 sm:order-1">

          <div class="flex flex-col gap-y-2 lg:gap-y-8 max-w-prose">
            <dl class="bg-red-800/10 p-2 font-mono text-center text-xs">
              <dt class="uppercase font-bold block">Published</dt>
              <dd><time>{publishDate}</time></dd>
            </dl>

            {Array.isArray(updatedDates) && updatedDates.length > 0 && updatedDates.map(updated => (
            <dl class="bg-red-800/10 p-2 font-mono text-center text-xs">
              <dt class="uppercase font-bold block">Updated</dt>
              <dd><time>{updated}</time></dd>
            </dl>
            ))}
          </div>
        </aside>
        <section class="order-1 sm:order-2">

          <div class="prose mx-auto px-4 sm:px-2">
            <slot />
          </div>

          <div class="py-8"></div>

          <!-- trailer -->
          <div class="flex flex-col gap-y-4 px-4 sm:px-2">

            <!-- disabled because the button does not save anything -->
            <!-- <div class="flex items-center gap-x-2">
              <p>Like this post</p>
              <LikeButton pageUrl={canonicalURL} client:visible />
            </div> -->
            <div>
              <p class="p-4 border border-red-600">Follow me on <a href="https://twitter.com/ryanmr?t=100"
                  class="underline">Twitter
                  @ryanmr</a>.</p>
            </div>
          </div>

        </section>


      </main>
    </article>
    <Footer />
  </div>
</body>

</html>
